services:
    cabbage.http.client:
        class: Cabbage\Core\Http\Client

    cabbage.gateway:
        class: Cabbage\Core\Gateway
        arguments:
            - '@cabbage.http.client'

    cabbage.configurator:
        class: Cabbage\Core\Configurator
        arguments:
            - '@cabbage.http.client'

    cabbage.document_mapper:
        class: Cabbage\Core\Document\Mapper
        arguments:
            - '@ezpublish.spi.persistence.location_handler'

    cabbage.document_router:
        class: Cabbage\Core\Document\Router

    cabbage.document_serializer:
        class: Cabbage\Core\Document\Serializer

    cabbage.document_bulk_serializer:
        class: Cabbage\Core\Document\BulkSerializer
        arguments:
            - '@cabbage.document_router'
            - '@cabbage.document_serializer'

    cabbage.query_translator.document_type_criterion_converter:
        class: Cabbage\Core\Query\Translator\DocumentTypeCriterionConverter

    cabbage.query_translator:
        class: Cabbage\Core\Query\Translator
        arguments:
            - '@cabbage.query_translator.document_type_criterion_converter'

    cabbage.query_router:
        class: Cabbage\Core\Query\Router

    cabbage.result_extractor:
        class: Cabbage\Core\ResultExtractor

    cabbage.handler:
        class: Cabbage\Core\Handler
        arguments:
            - '@cabbage.gateway'
            - '@cabbage.document_mapper'
            - '@cabbage.document_bulk_serializer'
            - '@cabbage.query_translator'
            - '@cabbage.query_router'
            - '@cabbage.result_extractor'
